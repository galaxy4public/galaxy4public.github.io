<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mind Drops - hacks</title><link href="https://dmitry.khlebnikov.net/" rel="alternate"/><link href="https://dmitry.khlebnikov.net/feeds/hacks.atom.xml" rel="self"/><id>https://dmitry.khlebnikov.net/</id><updated>2025-10-15T23:06:20+11:00</updated><subtitle>assorted bits of wit</subtitle><entry><title>Samsung CSC Change Using Modem Commands</title><link href="https://dmitry.khlebnikov.net/2025/10/09/samsung-csc-change-using-modem-commands/" rel="alternate"/><published>2025-10-09T15:30:00+11:00</published><updated>2025-10-15T23:06:20+11:00</updated><author><name>(GalaxyMaster)</name></author><id>tag:dmitry.khlebnikov.net,2025-10-09:/2025/10/09/samsung-csc-change-using-modem-commands/</id><summary type="html">&lt;p&gt;A technical guide for manually changing the Country Service Code (CSC)
on modern Samsung phones, motivated by author&amp;rsquo;s need to switch from
Australia (XSA) to a region like Indonesia (XID) to enable features such as
automated call recording. The author notes that older methods of flashing
CSC images were no longer effective on new devices and sought an
alternative to the popular Windows-only SamFW tool, as they use macOS. The
solution involves replicating the tool&amp;rsquo;s method of sending modem AT commands
over a Serial-over-USB connection. The process requires enabling specific
developer options on the phone, entering a diagnostic mode through the dialer,
connecting to the device&amp;rsquo;s modem endpoint with a terminal program, and issuing
a sequence of AT commands to set the new CSC before rebooting the phone.&lt;/p&gt;</summary><content type="html">&lt;p&gt;This is a brief brain dump, so I can recall it when needed.&lt;/p&gt;
&lt;p&gt;Each time I get a new Samsung phone I have to figure out a way to change the
Country Service Code (CSC) to a country that allows automated call recordings,
for example, Indonesia (XID).  Previously, approximately 5 years ago, it was
quite straight forward: you needed to download the HOME_CSC image for the
region you are interested in, ensure that it was for the same bootloader
version, and flash it to the CSC partition.&lt;/p&gt;
&lt;p&gt;However, something changed in recent years (and I was not paying attention to
the developments in Samsung world).  I just recently purchased Samsung ZFold 7
and the trick with flashing did not work, so I started to investigate.
Firstly, I discovered that the modern Samsung devces come with a multi-CSC
configuration, so everything is already pre-installed on the device &amp;ndash; one just
needs to change the setting to set the desired CSC for the device.  Secondly,
the articles on the net on the change of CSC were all pointing to the SamFW
tool, but I do have an issue with using that tool: for starters, it is a
Windows x86_64 tool and I don&amp;rsquo;t have any Intel based devices to run Windows
x86_64.  So, I started to research on how SamFW was doing the change of the
CSC.  According to what I gathered, the tool was using the Serial-over-USB to
perform the change.&lt;/p&gt;
&lt;p&gt;Below are the steps I took to change the CSC on my phone from &lt;code&gt;XSA&lt;/code&gt; (Australia)
to &lt;code&gt;XID&lt;/code&gt; (Indonesia).&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;You need to &lt;a href="https://www.samsung.com/uk/support/mobile-devices/how-do-i-turn-on-the-developer-options-menu-on-my-samsung-galaxy-device/"&gt;enable the &amp;ldquo;Developer options&amp;rdquo; menu&lt;/a&gt; on your Samsung device: go to Settings -&amp;gt; About phone -&amp;gt; Software information and tap on the &amp;ldquo;Build number&amp;rdquo; line 7 times.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In the &amp;ldquo;Developer options&amp;rdquo; menu make sure that you enable the following options:&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;a) &amp;ldquo;Stay awake&amp;rdquo; &amp;ndash; this is optional, but you need to ensure that the phone is awake and not locked while you are going to communicate with it via USB, so it is easier to turn this option on and once the changes are done to turn it back off;&lt;/p&gt;
&lt;p&gt;b) &amp;ldquo;USB debugging&amp;rdquo; &amp;ndash; I am not really sure whether this is strictly needed, but in my session it was enabled;&lt;/p&gt;
&lt;p&gt;c) &amp;ldquo;3GPP AT commands&amp;rdquo; &amp;ndash; This will enable the interface we are going to use to issue modem commands;&lt;/p&gt;
&lt;p&gt;d) &amp;ldquo;Default USB configuration&amp;rdquo;, select &amp;ldquo;Transferring files&amp;rdquo; &amp;ndash; this is important since we are going to land on the debug screen that would not allow us to access notifications, so there is no way to change the USB configuration on the fly.  You may want to change to your prefered setting after the CSC change is applied, though.&lt;/p&gt;
&lt;ol start="3"&gt;
&lt;li&gt;
&lt;p&gt;Launch the dialer application and enter &lt;code&gt;*#0*#&lt;/code&gt;, the screen will change to a white background with lots of square buttons for diagmostic purposes.  I believe this step is essential to enable some of the proprietary commands in the modem interface.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Connect your phone to your computer.  Mine is Apple Macbook M4, so it runs macOS.  Yours may run Linux or Windows.  It does not really matter, except with Windows you will need to install serial drivers for Samsung (e.g. if you install any official Samsung tools like KIES, you already should have the necessary drivers installed).  For macOS and Linux, it is much easier &amp;ndash; you don&amp;rsquo;t need to install anything, the Serial-over-USB should be supported out of the box.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Locate the modem endpoint on your operating system.  On macOS, use &lt;code&gt;ls -l /dev/cu.usbmodem*&lt;/code&gt; to locate it.  On Linux, I would suggest to do &lt;code&gt;dmesg | tail -30&lt;/code&gt; after connecting the device, you should be able to see which &lt;code&gt;/dev/tty*&lt;/code&gt; has been assigned for the Serial-over-USB.  For Windows, check your Device Manager to see which &lt;code&gt;COM*&lt;/code&gt; port was assigned.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use your favorite communication program to connect to the endpoint.  On macOS, I prefer to use &lt;code&gt;cu&lt;/code&gt;, which is included with the operating system and my examples below will use it.  On Linux, you have myriad of options, but I would use either &lt;code&gt;screen&lt;/code&gt; or &lt;code&gt;minicom&lt;/code&gt;.  On Windows, I think, HyperTerminal is still included with the operating system by default, but last time I have seen Windows up close was years ago.  Anyhow, you need to connect your communication program to the located endpoint, set the baudrate to 115200, and you should be all set.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Now is the magic :).  Below is my terminal session on macOS with my comments after the snippet:&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;input type="radio" name="code_menu9ad25de3e40b2237a346bf138d57e8d6e38dc347" class="no-line-numbers icon list-numbered"&gt;&lt;input type="radio" name="code_menu9ad25de3e40b2237a346bf138d57e8d6e38dc347" class="line-numbers icon list-numbered"&gt;&lt;code class="language-bash"&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;galaxy@galaxy&lt;span class="w"&gt; &lt;/span&gt;~&lt;span class="w"&gt; &lt;/span&gt;$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;-i&lt;span class="w"&gt;            &lt;/span&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Password:
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;root@galaxy&lt;span class="w"&gt; &lt;/span&gt;~&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# ls -la /dev/cu.*                    &lt;/span&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;crw-rw-rw-&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;root&lt;span class="w"&gt;  &lt;/span&gt;wheel&lt;span class="w"&gt;  &lt;/span&gt;0x9000003&lt;span class="w"&gt; &lt;/span&gt;Aug&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;26&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;:39&lt;span class="w"&gt; &lt;/span&gt;/dev/cu.Bluetooth-Incoming-Port
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;crw-rw-rw-&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;root&lt;span class="w"&gt;  &lt;/span&gt;wheel&lt;span class="w"&gt;  &lt;/span&gt;0x9000001&lt;span class="w"&gt; &lt;/span&gt;Aug&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;26&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;:38&lt;span class="w"&gt; &lt;/span&gt;/dev/cu.debug-console
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;crw-rw-rw-&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;root&lt;span class="w"&gt;  &lt;/span&gt;wheel&lt;span class="w"&gt;  &lt;/span&gt;0x9000005&lt;span class="w"&gt; &lt;/span&gt;Oct&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;14&lt;/span&gt;:03&lt;span class="w"&gt; &lt;/span&gt;/dev/cu.usbmodemXXXXXXXXXXXX
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Eris:~&lt;span class="w"&gt; &lt;/span&gt;root#&lt;span class="w"&gt; &lt;/span&gt;cu&lt;span class="w"&gt; &lt;/span&gt;-l&lt;span class="w"&gt; &lt;/span&gt;/dev/cu.usbmodemXXXXXXXXXXXX&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;115200&lt;/span&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Connected.
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;ATI
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Manufacturer:&lt;span class="w"&gt; &lt;/span&gt;SAMSUNG&lt;span class="w"&gt; &lt;/span&gt;ELECTRONICS&lt;span class="w"&gt; &lt;/span&gt;CORPORATION
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Model:&lt;span class="w"&gt; &lt;/span&gt;SM-F966B
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Revision:&lt;span class="w"&gt; &lt;/span&gt;F966BXXU4AYI1
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;SVN:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;01&lt;/span&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;IMEI:&lt;span class="w"&gt; &lt;/span&gt;IIIIIIIIIIIIIII
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;+GCAP:&lt;span class="w"&gt; &lt;/span&gt;+CGSM
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT+DUMPCTRL&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,0
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;+CME&lt;span class="w"&gt; &lt;/span&gt;Error:PACM&lt;span class="o"&gt;(&lt;/span&gt;AP&lt;span class="o"&gt;)&lt;/span&gt;,PROTECTED_NO_TOK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT+SWATD&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;&lt;span class="o"&gt;[&lt;/span&gt;DR&lt;span class="o"&gt;]&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;CHANGE&lt;span class="w"&gt; &lt;/span&gt;TO&lt;span class="w"&gt; &lt;/span&gt;DDEXE&lt;span class="o"&gt;[&lt;/span&gt;ATD&lt;span class="o"&gt;]&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;CHANGE&lt;span class="w"&gt; &lt;/span&gt;TO&lt;span class="w"&gt; &lt;/span&gt;DDEXE
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT+ACTIVATE&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,0,0
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;+CME&lt;span class="w"&gt; &lt;/span&gt;Error:PACM&lt;span class="o"&gt;(&lt;/span&gt;AP&lt;span class="o"&gt;)&lt;/span&gt;,UNREGISTED
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT+SWATD&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;&lt;span class="o"&gt;[&lt;/span&gt;DR&lt;span class="o"&gt;]&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;CHANGE&lt;span class="w"&gt; &lt;/span&gt;TO&lt;span class="w"&gt; &lt;/span&gt;ATD&lt;span class="o"&gt;[&lt;/span&gt;ATD&lt;span class="o"&gt;]&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;CHANGE&lt;span class="w"&gt; &lt;/span&gt;TO&lt;span class="w"&gt; &lt;/span&gt;ATD
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT+PRECONFG&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;,XID
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;+PRECONFG:2,OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;AT+CFUN&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,1
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;+CFUN&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,1:NA
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;OK
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;~.
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;Disconnected.
&lt;/div&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;root@galaxy&lt;span class="w"&gt; &lt;/span&gt;~&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;#&lt;/span&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I used &lt;code&gt;AT&lt;/code&gt; at the beginning of the session to confirm that the modem interface
is active (I got an &lt;code&gt;OK&lt;/code&gt;, so it was active). Then I used &lt;code&gt;ATI&lt;/code&gt; to ensure that I
am actually talking to the desired device (it was indeed &lt;code&gt;SM-F966B&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AT+DUMPCTRL=1,0&lt;/code&gt; is needed to enable the following &lt;code&gt;AT+SWATD=&lt;/code&gt; commands to work.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AT+ACTIVATE=0,0,0&lt;/code&gt; is a weird one.  There is not too much information on the
net regarding this command, but it seems that every single occurence is related
to enabling something in the firmware to allow the privileged settings to be
changed, like we do with the very next command.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AT+PRECONF=2,nnn&lt;/code&gt; is the primary command we want to execute.  The command sets
the CSC of the device, where &lt;code&gt;nnn&lt;/code&gt; is a three leter CSC used by Samsung.  In my
case it was &lt;code&gt;XID&lt;/code&gt; for Indonesia.  You can get a list of all available/known CSC
from &lt;a href="https://samfw.com/"&gt;SamFW&lt;/a&gt; (the site is really heavy on ads, though, so beware).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;AT+CFUN=1,1&lt;/code&gt; is supposed to reboot the device.  In my case, it did not, so I
rebooted it manually.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Once you rebooted your device, go to Settings -&amp;gt; About phone -&amp;gt; Software
information and look at the &amp;ldquo;Service prvider software version&amp;rdquo; section.  Mine
looks like the following (after the change):&lt;/p&gt;
&lt;pre class="highlight"&gt;&lt;input type="radio" name="code_menuc64a97b1bb913fff857131a02eb6925efec44a31" class="no-line-numbers icon list-numbered"&gt;&lt;input type="radio" name="code_menuc64a97b1bb913fff857131a02eb6925efec44a31" class="line-numbers icon list-numbered"&gt;&lt;code class="language-text"&gt;&lt;div class="line"&gt;&lt;a&gt;&lt;/a&gt;XID/XID,XID/XSA,OPS&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Somewhere on the net you could find the format of this string, but basically it
means that I have a dual-SIM enabled device with XID (Indonesia) CSC enabled
for both SIMs, that the custom CSC is XID, but factory one is XSA (Australia).
In your case, you should see your selected CSC in that line, if everything
worked out correctly.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This is basically it. Enjoy! :)&lt;/p&gt;</content><category term="hacks"/><category term="hacks"/><category term="howto"/><category term="console"/></entry></feed>